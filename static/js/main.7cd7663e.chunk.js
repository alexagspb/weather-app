(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{40:function(t,e,n){t.exports=n(64)},54:function(t,e,n){},56:function(t,e,n){},58:function(t,e,n){},60:function(t,e,n){},62:function(t,e,n){},64:function(t,e,n){"use strict";n.r(e);var a,r,c,i,o=n(2),s=n.n(o),u=n(33),l=n.n(u),p=n(11),y=n(6),d=n(66),f=n(65),m=Object(f.a)("GET_CITY_REQUEST").getCityRequest,C=Object(f.a)("UPDATE_CITY_REQUEST").updateCityRequest,b=Object(f.a)("GET_CITY_SUCCESS").getCitySuccess,E=Object(f.a)("GET_CITY_ERROR").getCityError,O=Object(f.a)("SET_CITY_ACTIVE").setCityActive,v=Object(d.a)((a={},Object(y.a)(a,m.toString(),function(){return!0}),Object(y.a)(a,C.toString(),function(){return!0}),Object(y.a)(a,b.toString(),function(){return!1}),Object(y.a)(a,E.toString(),function(){return!1}),Object(y.a)(a,O.toString(),function(){return!1}),a),!1),j=n(39),h=Object(f.a)("GET_CITY_REQUEST").getCityRequest,g=Object(f.a)("GET_CITIES_REQUEST").getCitiesRequest,S=Object(f.a)("UPDATE_CITY_REQUEST").updateCityRequest,_=Object(f.a)("SELECT_CITY_REQUEST").selectCityRequest,T=Object(f.a)("GET_CITY_SUCCESS").getCitySuccess,x=Object(f.a)("GET_CITIES_SUCCESS").getCitiesSuccess,R=Object(f.a)("GET_CITY_ERROR").getCityError,k=Object(f.a)("REMOVE_CITY_REQUEST").removeCityRequest,w=Object(f.a)("REMOVE_CITY_SUCCESS").removeCitySuccess,I=Object(f.a)("SET_CITY_ACTIVE").setCityActive,q=Object(d.a)((r={},Object(y.a)(r,I.toString(),function(t,e){return e.payload}),Object(y.a)(r,w.toString(),function(t){return{}}),r),{}),N=Object(d.a)((c={},Object(y.a)(c,T.toString(),function(t,e){return Object(j.a)(t).concat([e.payload])}),Object(y.a)(c,x.toString(),function(t,e){return e.payload}),Object(y.a)(c,R.toString(),function(t){return t}),Object(y.a)(c,w.toString(),function(t,e){return t.filter(function(t){return t.name!==e.payload})}),c),[]),A=Object(d.a)((i={},Object(y.a)(i,T.toString(),function(t){return{}}),Object(y.a)(i,R.toString(),function(t,e){return e.payload}),i),{}),U=Object(p.c)({citiesList:N,activeCity:q,error:A}),Y=Object(p.c)({loading:v,cities:U}),D=n(5),P=n.n(D),L=n(3);function G(){var t=localStorage.getItem("cities");return t=t?JSON.parse(t):{}}function J(t){localStorage.setItem("cities",JSON.stringify(t))}function M(t){var e=G();return t in e?{name:t,id:e[t].id,list:e[t].list}:null}function Q(t){var e=t.id,n=t.name,a=t.list,r=G();n in r||(r[n]={id:e,list:a}),J(r)}function W(t){var e=G();t in e&&delete e[t],J(e)}var F="https://api.openweathermap.org/data/2.5/",B="e539b3dcdce62f43d0c9eac4ff2b6ab4",V={fetchForecastByLocation:function(t){var e=t.location;return fetch("".concat(F,"forecast/daily?q=").concat(e,"&type=accurate&APPID=").concat(B,"&cnt=5")).then(function(t){return t.json()})},fetchForecastByCoords:function(t){var e=t.lat,n=t.lon;return fetch("".concat(F,"forecast/daily?lat=").concat(e,"&lon=").concat(n,"&type=accurate&APPID=").concat(B,"&cnt=5")).then(function(t){return t.json()})}},K=P.a.mark(z),X=P.a.mark(H);function z(){return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(L.d)([h,k,_,S],H);case 2:case"end":return t.stop()}},K,this)}function H(t){var e,n,a,r,c,i,o,s,u,l;return P.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(t.type!==_().type){p.next=4;break}return e=M(t.payload),n=e.id,a=e.name,r=e.list,p.next=4,Object(L.c)(I({id:n,name:a,list:r}));case 4:if(t.type!==h().type&&t.type!==S().type){p.next=44;break}if(!(c=M(t.payload))||t.type===S().type){p.next=12;break}i=c.id,o=c.name,s=c.list,p.next=42;break;case 12:if(p.prev=12,!t.payload.location){p.next=19;break}return p.next=16,V.fetchForecastByLocation(t.payload);case 16:p.t0=p.sent,p.next=22;break;case 19:return p.next=21,V.fetchForecastByCoords(t.payload);case 21:p.t0=p.sent;case 22:if(u=p.t0,l=u.city,i=l.id,o=l.name,s=u.list,t.type!==S().type){p.next=32;break}return p.next=30,Object(L.c)(w(t.payload.location));case 30:return p.next=32,Object(L.a)(W,t.payload.location);case 32:return p.next=34,Object(L.c)(T({id:i,name:o,list:s}));case 34:return p.next=36,Object(L.a)(Q,{id:i,name:o,list:s});case 36:p.next=42;break;case 38:return p.prev=38,p.t1=p.catch(12),p.next=42,Object(L.c)(R({error:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0433\u043e\u0440\u043e\u0434"}));case 42:return p.next=44,Object(L.c)(I({id:i,name:o,list:s}));case 44:if(t.type!==k().type){p.next=49;break}return p.next=47,Object(L.c)(w(t.payload));case 47:return p.next=49,Object(L.a)(W,t.payload);case 49:case"end":return p.stop()}},X,this,[[12,38]])}var Z=P.a.mark(tt),$=P.a.mark(et);function tt(){return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(L.d)([g,x],et);case 2:case"end":return t.stop()}},Z,this)}function et(t){var e,n,a;return P.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t.type!==g().type){r.next=6;break}for(a in e=G(),n=[],e)n.push({name:a,id:e[a].id,list:e[a].list});return r.next=6,Object(L.c)(x(n));case 6:case"end":return r.stop()}},$,this)}var nt=P.a.mark(at);function at(){return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(L.b)(tt);case 2:return t.next=4,Object(L.b)(z);case 4:case"end":return t.stop()}},nt,this)}var rt=n(38),ct=Object(rt.a)(),it=n(25),ot=(n(54),n(22)),st=n(23),ut=n(26),lt=n(24),pt=n(27),yt=n(36),dt=n(37),ft=n.n(dt);n(56),n(58);function mt(t){return s.a.createElement("div",{className:"".concat(t.isActive?"City City_active":"City")},s.a.createElement("div",{className:"City__update",onClick:function(){return t.updateCity(t.item.name)}}),s.a.createElement("div",{className:"City__name",onClick:function(){return t.selectCity(t.item.name)}},t.item.name),s.a.createElement("div",{className:"City__remove",onClick:function(){return t.removeCity(t.item.name)}}))}var Ct={0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},bt={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"June",6:"July",7:"Aug",8:"Sept",9:"Oct",10:"Nov",11:"Dec"};function Et(t){return parseInt(1.8*(t-273.15)+32,10)}n(60);function Ot(t){return s.a.createElement("div",{className:"Day"},s.a.createElement("h3",null,function(t){var e=new Date(1e3*t),n=Ct[e.getDay()],a=e.getDate(),r=bt[e.getMonth()];return"".concat(n,", ").concat(r," ").concat(a)}(t.item.dt)),s.a.createElement("p",null,t.item.weather[0].description),s.a.createElement("p",null,"min temp: ",Et(t.item.temp.min)," degrees"),s.a.createElement("p",null,"max temp: ",Et(t.item.temp.max)," degrees"),s.a.createElement("p",null,"humidity: ",t.item.humidity))}var vt=function(t){function e(){var t,n;Object(ot.a)(this,e);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(ut.a)(this,(t=Object(lt.a)(e)).call.apply(t,[this].concat(r)))).state={city:""},n.handleInputChange=function(t){n.setState({city:t.target.value})},n.handleKeyPress=function(t){var e=n.state.city,a=n.props.getCityRequest;"Enter"===t.key&&e.trim().length&&(a({location:e}),n.setState({city:""}))},n.handleClick=function(t){var e=n.state.city,a=n.props.getCityRequest;e.trim().length&&(a({location:e}),n.setState({city:""}))},n.removeCity=function(t){n.props.removeCityRequest(t)},n.updateCity=function(t){n.props.updateCityRequest({location:t})},n.selectCity=function(t){n.props.selectCityRequest(t)},n}return Object(pt.a)(e,t),Object(st.a)(e,[{key:"componentDidMount",value:function(){var t=Object(yt.a)(P.a.mark(function t(){var e,n,a;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.props.getCitiesRequest(),t.next=3,this.getcurrentLocation();case 3:e=t.sent,n=e.lat,a=e.lon,console.log(n,a),this.props.getCityRequest({lat:n,lon:a});case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getcurrentLocation",value:function(){if(navigator&&navigator.geolocation)return new Promise(function(t,e){navigator.geolocation.getCurrentPosition(function(e){var n=e.coords;t({lat:n.latitude,lon:n.longitude})})})}},{key:"render",value:function(){var t=this,e=this.state.city,n=this.props,a=n.loading,r=n.error,c=n.citiesList,i=n.activeCity;return s.a.createElement("div",{className:"Weather"},s.a.createElement("input",{className:"Weather__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434",value:e,onChange:this.handleInputChange,onKeyPress:this.handleKeyPress}),s.a.createElement("button",{onClick:this.handleClick,className:"Weather__button"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0433\u043e\u0440\u043e\u0434"),s.a.createElement("div",{className:"Weather__error"},r),a?s.a.createElement("div",{className:"spinner row justify-content-md-center"},s.a.createElement(ft.a,{size:"64px",color:"blue",gap:5})):s.a.createElement("div",null,s.a.createElement("div",{className:"Weather__cities"},c&&c.map(function(e){return s.a.createElement(mt,{key:e.id,isActive:i.id===e.id,item:e,selectCity:t.selectCity,updateCity:t.updateCity,removeCity:t.removeCity})})),s.a.createElement("div",{className:"Weather__days"},i.list&&i.list.map(function(t){return s.a.createElement(Ot,{key:t.dt,item:t})}))))}}]),e}(o.PureComponent),jt={getCityRequest:h,getCitiesRequest:g,removeCityRequest:k,updateCityRequest:S,selectCityRequest:_},ht=Object(it.b)(function(t){return{loading:function(t){return t.loading}(t),error:function(t){return t.cities.error.error}(t),citiesList:function(t){return t.cities.citiesList}(t),activeCity:function(t){return t.cities.activeCity}(t)}},jt)(vt),gt=(n(62),function(t){function e(){return Object(ot.a)(this,e),Object(ut.a)(this,Object(lt.a)(e).apply(this,arguments))}return Object(pt.a)(e,t),Object(st.a)(e,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(ht,null))}}]),e}(o.Component)),St=function(t){var e=Object(p.e)(Y,t,Object(p.d)(Object(p.a)(ct),window.devToolsExtension?window.__REDUX_DEVTOOLS_EXTENSION__():function(t){return t}));return ct.run(at),e}();l.a.render(s.a.createElement(it.a,{store:St},s.a.createElement(gt,null)),document.getElementById("root"))}},[[40,2,1]]]);
//# sourceMappingURL=main.7cd7663e.chunk.js.map